<html>
<head>
    <title>Lao Haldussüsteem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"></link>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto mt-10">
        <h1 class="text-3xl font-bold text-center mb-6">Lao Haldussüsteem</h1>
        <div class="bg-white p-6 rounded-lg shadow-lg">
            <form id="productForm" class="space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="productName" class="block text-sm font-medium text-gray-700">Toote nimi</label>
                        <input type="text" id="productName" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm">
                    </div>
                    <div>
                        <label for="quantity" class="block text-sm font-medium text-gray-700">Kogus</label>
                        <input type="number" id="quantity" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm">
                    </div>
                    <div>
                        <label for="arrivalDate" class="block text-sm font-medium text-gray-700">Saabumise kuupäev</label>
                        <input type="date" id="arrivalDate" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm">
                    </div>
                    <div>
                        <label for="orderDate" class="block text-sm font-medium text-gray-700">Tellimuse kuupäev</label>
                        <input type="date" id="orderDate" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm">
                    </div>
                    <div>
                        <label for="packedDate" class="block text-sm font-medium text-gray-700">Pakkimise kuupäev</label>
                        <input type="date" id="packedDate" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm">
                    </div>
                    <div>
                        <label for="sendOutDate" class="block text-sm font-medium text-gray-700">Väljasaatmise kuupäev</label>
                        <input type="date" id="sendOutDate" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm">
                    </div>
                    <div>
                        <label for="storeArrivalDate" class="block text-sm font-medium text-gray-700">Poodi saabumise kuupäev</label>
                        <input type="date" id="storeArrivalDate" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm">
                    </div>
                </div>
                <div class="flex justify-end">
                    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-md shadow-sm hover:bg-blue-600">Lisa toode</button>
                </div>
            </form>
        </div>
        <div class="mt-10 bg-white p-6 rounded-lg shadow-lg">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Toote nimi</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Kogus</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Saabumise kuupäev</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tellimuse kuupäev</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Pakkimise kuupäev</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Väljasaatmise kuupäev</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Poodi saabumise kuupäev</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tegevused</th>
                    </tr>
                </thead>
                <tbody id="productTableBody" class="bg-white divide-y divide-gray-200">
                    <!-- Dynamic rows will be added here -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const productForm = document.getElementById('productForm');
            const productTableBody = document.getElementById('productTableBody');

            productForm.addEventListener('submit', function(event) {
                event.preventDefault();

                const productName = document.getElementById('productName').value || "N/A";
                const quantity = document.getElementById('quantity').value || "0";
                const arrivalDate = document.getElementById('arrivalDate').value || "Määramata";
                const orderDate = document.getElementById('orderDate').value || "Määramata";
                const packedDate = document.getElementById('packedDate').value || "Määramata";
                const sendOutDate = document.getElementById('sendOutDate').value || "Määramata";
                const storeArrivalDate = document.getElementById('storeArrivalDate').value || "Määramata";

                const product = {
                    productName,
                    quantity,
                    arrivalDate,
                    orderDate,
                    packedDate,
                    sendOutDate,
                    storeArrivalDate
                };

                addProductToTable(product);
                saveProductToLocalStorage(product);
                productForm.reset();
            });

            function addProductToTable(product) {
                const row = document.createElement('tr');

                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">${product.productName}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${product.quantity}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${product.arrivalDate}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${product.orderDate}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${product.packedDate}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${product.sendOutDate}</td>
                    <td class="px-6 py-4 whitespace-nowrap">${product.storeArrivalDate}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <button class="bg-yellow-500 text-white px-3 py-1 rounded-md shadow-sm hover:bg-yellow-600 edit-btn"><i class="fas fa-edit"></i></button>
                        <button class="bg-red-500 text-white px-3 py-1 rounded-md shadow-sm hover:bg-red-600 delete-btn"><i class="fas fa-trash-alt"></i></button>
                    </td>
                `;

                productTableBody.appendChild(row);

                row.querySelector('.edit-btn').addEventListener('click', function() {
                    document.getElementById('productName').value = product.productName;
                    document.getElementById('quantity').value = product.quantity;
                    document.getElementById('arrivalDate').value = product.arrivalDate;
                    document.getElementById('orderDate').value = product.orderDate;
                    document.getElementById('packedDate').value = product.packedDate;
                    document.getElementById('sendOutDate').value = product.sendOutDate;
                    document.getElementById('storeArrivalDate').value = product.storeArrivalDate;

                    row.remove();
                    deleteProductFromLocalStorage(product);
                });

                row.querySelector('.delete-btn').addEventListener('click', function() {
                    row.remove();
                    deleteProductFromLocalStorage(product);
                });
            }

            function saveProductToLocalStorage(product) {
                let products = JSON.parse(localStorage.getItem('products')) || [];
                products.push(product);
                localStorage.setItem('products', JSON.stringify(products));
            }

            function deleteProductFromLocalStorage(product) {
                let products = JSON.parse(localStorage.getItem('products')) || [];
                products = products.filter(p => JSON.stringify(p) !== JSON.stringify(product));
                localStorage.setItem('products', JSON.stringify(products));
            }

            function loadProductsFromLocalStorage() {
                const products = JSON.parse(localStorage.getItem('products')) || [];
                products.forEach(product => addProductToTable(product));
            }

            loadProductsFromLocalStorage();
        });
    </script>
</body>
</html>
